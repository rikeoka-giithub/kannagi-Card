<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kannagi Card – Golden Rain (Front)</title>
<style>
  :root{ --enter-dur: 1.25s; }

  /* 背景は固定 */
  body{
    margin:0; min-height:100svh;
    display:grid; place-items:center;
    background:#000 url("images/Gold_Glitter.jpg") center/cover fixed no-repeat;
    overflow:hidden;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Hiragino Kaku Gothic ProN","Yu Gothic",Meiryo,sans-serif;
  }

  /* カード本体（背面レイヤー） */
  .card{
    width:min(88vw, 480px);
    aspect-ratio: 2.5 / 3.5;
    position:relative; z-index:1;       /* ← 背面に */
    overflow:hidden; background:#000;
    transform: translateY(120%) scale(.85);
    filter: drop-shadow(0 60px 70px rgba(0,0,0,.55));
    animation:
      enterUp var(--enter-dur) cubic-bezier(.18,.8,.22,1) forwards,
      ringPulse 520ms ease-out var(--enter-dur) both;
  }

  video{ width:100%; height:100%; object-fit:cover; display:block; }

  .card::after{
    content:""; position:absolute; inset:-10%;
    background: radial-gradient(ellipse at center, rgba(255,255,255,.35), rgba(255,255,255,0) 60%);
    opacity:0; mix-blend-mode:screen; pointer-events:none;
    animation: impactFlash 240ms ease-out var(--enter-dur) both;
  }

  /* ── 前面の金粉レイヤー ───────────────────── */
  .rain{
    position:fixed; inset:0; z-index:5;  /* ← カードより前面に */
    pointer-events:none;                 /* ← 操作の邪魔をしない */
    overflow:hidden;
  }
  .rain span{
    position:absolute; top:-10px; left:var(--x);
    width:var(--s); height:var(--s); border-radius:50%;
    background:
      radial-gradient(circle at 30% 30%, #fff8b3 0 30%, #ffd95e 50%, #ffb400 70%, transparent 72%);
    opacity:.9;
    filter: drop-shadow(0 0 6px rgba(255,200,100,.9));
    mix-blend-mode: screen;              /* 映像に馴染ませる */
    will-change: transform, opacity;     /* パフォーマンス改善 */
    animation: fall var(--t) linear infinite;
  }

  /* ── Animations ─────────────────────────── */
  @keyframes enterUp{
    0%{   transform: translateY(120%) scale(.85); filter: drop-shadow(0 70px 80px rgba(0,0,0,.58)); }
    70%{  transform: translateY(0%)   scale(1.08); filter: drop-shadow(0 34px 44px rgba(0,0,0,.52)); }
    100%{ transform: translateY(0%)   scale(1.000); filter: drop-shadow(0 18px 28px rgba(0,0,0,.45)); }
  }
  @keyframes impactFlash{
    0%{opacity:0;} 25%{opacity:.55; transform: scale(1.03);} 100%{opacity:0; transform: scale(1);}
  }
  @keyframes ringPulse{
    0%{ box-shadow:0 0 0 0 rgba(255,255,255,.18), 0 18px 28px rgba(0,0,0,.45); }
    60%{ box-shadow:0 0 0 28px rgba(255,255,255,0), 0 26px 40px rgba(0,0,0,.50); }
    100%{box-shadow:0 0 0 40px rgba(255,255,255,0), 0 18px 28px rgba(0,0,0,.45); }
  }
  @keyframes fall{
    0%{   transform: translateY(-10px) scale(1);   opacity:1; }
    90%{  opacity:1; }
    100%{ transform: translateY(110vh) scale(0.8); opacity:0; }
  }

  @media (prefers-reduced-motion: reduce){
    .card, .rain span { animation:none; transform:none; }
  }
</style>
</head>
<body>

  <!-- 背面：カード -->
  <div class="card" aria-label="Motion Trading Card">
    <video
      src="kannagi.MP4"
      autoplay muted loop playsinline preload="auto"
    ></video>
  </div>

  <!-- 前面：金粉（常時降る） -->
  <div class="rain">
    <script>
      // 粒の数・速度・サイズはここで調整
      const COUNT = 120; // ← 増やすと豪華、減らすと軽量
      for(let i=0;i<COUNT;i++){
        const s = document.createElement('span');
        const size  = (Math.random()*4+3).toFixed(1)+'px';
        const left  = (Math.random()*100)+'vw';
        const time  = (Math.random()*6+7).toFixed(1)+'s';
        const delay = (Math.random()*-7).toFixed(1)+'s';
        s.style.setProperty('--s', size);
        s.style.setProperty('--x', left);
        s.style.setProperty('--t', time);
        s.style.animationDelay = delay;
        document.currentScript.parentElement.appendChild(s);
      }
    </script>
  </div>

</body>
</html>
